<!DOCTYPE html>
<html>
<head>
    <!-- You can use Open Graph tags to customize link previews.
    Learn more: https://developers.facebook.com/docs/sharing/webmasters -->
	<meta property="og:url"           content="http://prooucontra.com.br" />
	<meta property="og:type"          content="website" />
	<meta property="og:title"         content="Pró ou Contra - Impeachment" />
	<meta property="og:description"   content="Acompanhe a opinião das pessoas e dê a sua própria!" />
	<meta property="og:image"         content="http://prooucontra.com.br/images/prooucontra.com.br.png" />

	<title>Pró ou Contra</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<style>
		body {
			transition: background 10s;
			font-family: "Opensans";
		}
		body.yes {
			background-color: #5AD3D1;
		}
		body.no {
			background-color: rgba(255, 90, 94, 0.7);
		}
		h1 {
			margin-top:100px;
		}

		#result-container {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			margin: auto;
			max-width: 400px;
			max-height: 400px;
		}
		@media (max-width: 320px) { 
			#result-container {
				top:230px;
			}
		}
		@media (max-width: 768px) { 
			#result-container {
				top:200px;
			}
		}


		.result-counter {
			font-size: 50px;
		}

		#pros {
			text-align: left;
		}

		#cons {
			text-align: right;
		}

		#note {
			font-size: 12;
			text-align: center;
			opacity: 0;
		}
		.done #note {
			opacity: 1;
		}

	</style>
</head>
<body>
<div id="note">
	Os dados apresentados são apenas uma representação de quantos cliques ocorreram em cada uma das opções, sendo passíveis de falha.
</div>
<body class="done {{cookie}}">

<div class="container">
	<div class="row text-center">
		<h1>Você votou: {{voted}}!</h1>
		<!-- Your share button code -->
		<div class="fb-share-button" 
			data-href="http://www.your-domain.com/your-page.html" 
			data-layout="button_count">
		</div>

	</div>
	<div class="row">
		<div class="col-xs-6 text-center">
			<div id="pros" class="result-counter">{{pros}}<br>prós</div>
		</div>
		<div class="col-xs-6 text-center">
			<div id="cons" class="result-counter">{{cons}}<br>contras</div>
		</div>
	</div>

	<div id="result-container">
		<canvas id="result" width="400" height="400"></canvas>
		<br>
		<div class="text-center">
		<a download="prooucontra.com.br.png" id="save" class="btn btn-success" href="">Salvar imagem</a>
		</div>
	</div>
</div>


	<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
	<script type="text/javascript">
		(function(){
			$(document).ready(function(){
				var data = [
				    {
				        value: {{pros}},
				        color:"#F7464A",
				        highlight: "#FF5A5E",
				        label: "Favoráveis"
				    },
				    {
				        value: {{cons}},
				        color: "#46BFBD",
				        highlight: "#5AD3D1",
				        label: "Contrarios"
				    }
				];

				var ctx = $("#result").get(0).getContext("2d");
				var myPieChart = new Chart(ctx).Pie(data, {
					responsive: true,
				    onAnimationComplete: function()
				    {
				        this.showTooltip(this.segments, true);

				        //Show tooltips in bar chart (issue: multiple datasets doesnt work http://jsfiddle.net/5gyfykka/14/)
				        //this.showTooltip(this.datasets[0].bars, true);

				        //Show tooltips in line chart (issue: multiple datasets doesnt work http://jsfiddle.net/5gyfykka/14/)
				        //this.showTooltip(this.datasets[0].points, true);  
				    },
    				showTooltips: true
				});

				$("#save").click(function(){
					$(this).attr('href', myPieChart.toBase64Image().replace(/^data:image\/[^;]/, 'data:application/octet-stream'))
				});
			});
		})();
	</script>

	
	<!-- Load Facebook SDK for JavaScript -->
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v2.6";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));</script>
</body>
</html>
